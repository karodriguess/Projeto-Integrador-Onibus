<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/aceito.css">
    <title>Tela de Sucesso</title>
</head>

<body>
    <div class="catraca">
        <div class="success-screen">
            <div class="success-icon">
                <img src="../img/accept.png" alt="Ícone de Sucesso">
            </div>
            <div>
                <p>SALDO: R$:00,00</p>
            </div>
            <div class="success-message">
                <p>LIBERADO</p>
            </div>
        </div>
    </div>

    <script>
        // Função para extrair parâmetros da URL
        const obterParametroDaUrl = (nome) => {
            const urlSearchParams = new URLSearchParams(window.location.search);
            return urlSearchParams.get(nome);
        };

        // Função para exibir a mensagem e redirecionar após 5 segundos
        const exibirMensagemEAgendarRedirecionamento = () => {
            const causa = obterParametroDaUrl("causa");
            const mensagemParagrafo = document.getElementById("mensagem");

            // Exibir mensagem com base na causa
            if (causa === "cliente-nao-encontrado") {
                mensagemParagrafo.innerText = "Cliente não encontrado.";
            } else if (causa === "saldo-insuficiente") {
                mensagemParagrafo.innerText = "Saldo insuficiente.";
            } else if (causa === "saldo-insuficiente") {
                mensagemParagrafo.innerText = "Pass";
            }

            // Agendar redirecionamento após 5 segundos
            setTimeout(() => {
                window.location.href = "http://localhost:3000/catraca/aguardando";
            }, 3000);
        };

        exibirMensagemEAgendarRedirecionamento();

    </script>
</body>

</html>